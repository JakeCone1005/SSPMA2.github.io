<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SSPMA Sizing Calculator</title>
    <style>
	
	@font-face {
      font-family: bahnschrift;
      src: url('Fonts/bahnschrift.ttf') format('truetype');
    }

	@font-face {
		font-family: OpenSans-Regular;
		src: url('Fonts/OpenSans-Regular.ttf') format('truetype');
    }   
        body, html {
            height: 100%; /* Ensure full height */
            margin: 0;
            font-family: bahnschrift, Helvetica, Sans-Serif;
            background-color: #F5F5F5;
            display: flex; /* Makes body a flex container */
            flex-direction: column; /* Stack children vertically */
			overflow-x: clip;
        }


        .header {
			display: flex;
			align-items: center; /* Align items vertically */
			background-color: white;
			color: #231F20;
			padding: 20px;
			height: 65px;			
        }
		
		.headerText {
			align-items: center;
            background-color: white;
            color: #231F20;
            padding: 20px;
			font-size: 18px;
            text-decoration: none;
			font-family: bahnschrift, Helvetica, Sans-Serif;
			font-weight: 700;
			
        }
		
		.searchBar {
			background-color: white;
			width: 250px;
			height: 44px;
			border-radius: 5px;
			display: flex;
			align-items: center;
			border: 1px solid #ccc;
			margin: auto;
			transform: translateX(0%);
			position: relative;
			z-index: 2;

		}

        .logo {
            width: 200px;
            height: auto;
            margin-left: 20px;
			margin-top: 2px;		
        }
		
		.footerPics {
			padding-right:15px;			
        }


        .nav-bar {
            background-color: #254676;
			height: 61px;
        }
		

        .nav-bar a {
            float: left; 
            color: white;
            text-align: center;
            padding: 20px 20px;
			font-size: 15px;
            text-decoration: none;
			font-family: bahnschrift, Helvetica, Sans-Serif;
			font-weight: 400;
            letter-spacing: 1px;			
        }

        .nav-bar a:hover {
            color: #DBB246;
        }
		
		.navbar-right {
			float: right;
		}

		.container {
			display: flex;
			flex-direction: column;
			margin: auto;
		
		label {
			padding: 10px;
			font-family: bahnschrift, Helvetica, Sans-Serif;
			font-weight: 400;
			font-size: 18px;
			text-align: right;
		}

		input {
			height: 30px;
			width: 50px;
			border-radius: 3px;
			font-family: bahnschrift, Helvetica, Sans-Serif;
			font-weight: 400;
			font-size: 17px;
			border: 1px solid #ccc;
			margin: 5px;
			padding-left: 8px;
		}
		
		input:focus {
			outline: 3px solid rgba(191, 222, 255, 0.8);
		}

		}			
		#startContainer {
			display: flex;
			flex-direction: column;
			position: relative;
			justify-content: center;
		}
		
		#fixtureSelector {
			flex: 1;
		}
		
		.gpmStuff {
			display: flex;
			flex: 1;
			flex-direction: column;
		}
		
		#basinStuff {
			flex: 1;
		}
		
		#pipeLength {
			flex: 1;
		}
		
		#home {
			width: 35px;
		}
		
		#start {
			font-family: bahnschrift;
			font-weight: 600;
			font-size: 20pt;
			letter-spacing: 1px;
			text-align: center;
		}

		#progress {
			width: 100%;
			align-self: flex-start;
			padding-bottom:20px;
		}
		
		#resultsDiv {
			color: #545454;
			text-align: left;
			font-family: bahnschrift;
			font-size:16px;
			font-weight: 500;
		}
		
		.continue {
			width: 100%;
			bottom: 0px;
			color: white;
			height: 100px;
			font-family: bahnschrift;
			align-items: center;
			padding-bottom:20px;
			text-align: center;
			display: flex;
		}
		
		.continueButton {
			background-color: #254676;
			font-family: bahnschrift;
			font-size: 16px;
			font-weight: 400;
			height: 40px;
			width: 107px;
			border-radius: 5px;			
		}
			
		.continueButton:hover {
			background-color: #254676;
			color: #89BFE7;
		}
		
		.calculation {
			width: 100%;
			position: relative;
			bottom: 0px;
			color: black;
			padding: 10px;
			height: 75px;
			font-family: bahnschrift;
			font-size: 18px;
			font-weight: 400;
			display: flex;
			align-items: center;
			justify-content: center;
			text-align: center;
			flex-direction: column;
		}
        

		button {
			font-family: bahnschrift, Helvetica, Sans-Serif;
			font-size: 18px;
			padding: 5px 10px;
			background-color: #A9A9A9;
			border: none;
			color: white;
			border-radius: 5px;
			cursor: pointer;
			transition: background-color 0.3s;
			height: 45px;
			text-align: center;
			margin-top: 20px;
			margin-left: auto;
			margin-right: auto;
		}

		#startButton:hover {
			background-color: #555;
		}

        #footer {
			position: relative;
			bottom: 0;
            background-color: #254676;
            color: white;
            padding: 14px 50px;
			height:20px;
			width: 100%;
			display: flex;
			align-items: center;
			overflow: none;
			justify-content: space-between;
			
        }
		
		.footer-left {
			font-family: bahnschrift;
			font-size:11px;
			padding-bottom:7px;
			margin-left:-27px;
		}
		
		.footer-right {
			font-family: bahnschrift;
			font-size:11px;
			padding-bottom:7px;
			margin-right:70px;
		}
		
		#footer2 {
			position: relative;
			bottom: 0px;
            background-color: #231F20;
            color: white;
			width: 100%;
            padding: 20px 0;
			max-height:200px;
			font-family: bahnschrift;
			align-items: center;
			text-align: right;
        }
		
		#scouringNote {
			flex: 1;
			margin-left: auto;
			margin-right: auto;
			color: red;
			font-size: 17px;
		}
		
		.hidden {
			display: none;
		}
				
		
		.fixtureUnitSelect {
		}
		
		#fixturesToChoose {
			display: flex;
			flex-wrap: wrap;
			grid-template-columns: auto auto auto auto;
			justify-content: center;
			align-content: flex-start;
			padding: 20px;
		
			max-width: 1100px;
			min-width: 740px;
			
		}
		
		#fixtureOutputs {
			
		}
		
		#fittingsOutPuts {
			display: grid;
			justify-items: right;
			grid-template-columns: auto auto auto auto;
			space-between: 30px;
			margin-bottom: 30px;
		}
		#fittingsOutPuts2 {
			display: grid;
			grid-template-columns: auto auto auto auto;
			margin-top: 30px;
		}
		#fittingsOutPuts > label {
			padding-right: 25px;
			}
		.flexBoxEl {
			min-width: 350px;
			justify-self: right;
			flex-basis: 0;
			flex-grow: 1;
			text-align: right;
			}
			
		#fittingsDiv {
			border-top: 2px solid #afafaeff;
			display: block;
			width: 100%	
			margin-left: 0px;
			margin-right:0;
			text-align: center;
			margin-top: 15px;
			margin-bottom: 15px;
			font-weight: 400;
			font-size: 20px;
			padding-top: 10px;
		}
		
		.button-row {
			margin-left:20px;
		}

		.active-button {
			display:inline-block;
			float:left;
			background-color: #A9A9A9;
			color: white; 
			padding: 10px 20px; 
			border: none;
			border-radius: 0px;
			cursor: pointer;
			height: 35px;
			transition: background-color 0.3s;
			margin-right: 7px;
		}

		.active-button:hover {
			background-color: #555;
		}
		
		.status-button {
			display:flex;
			align-items:center;
			float:left;
			background-color: #A9A9A9; 
			color: white; 
			padding: 10px 10px; 
			border: none; 
			border-radius: 0px; 
			cursor: pointer;
			height: 35px;
			transition: background-color 0.3s; 
			margin-right: 7px;
		}
		.status-button:hover {
			background-color: #555;
		}


		.inactive-button {
			cursor: default;
			display:inline-block;
			float:left;
			background-color:
			color: #666;
			padding: 10px 20px; 
			border: none;
			border-radius: 0px;
			margin-right: 7px;
			height: 35px;
		}

		.inactive-button:hover {
			background-color: #EEE;
		}
		
		.homeimg {
			width: 23px;
            height: auto;
            margin-left: -12px;
			margin-top: -3px;			
        }
		select {
			width: 70px;
			margin: 5px;
			font-family: bahnschrift;
			-webkit-border-radius: 0px;
			}
		option {
		-webkit-border-radius: 0px;
		}
		select:focus {
					outline: 3px solid rgba(191, 222, 255, 0.8);
					}
					
		
		#gpmValue {
			background-color: lightgrey;
			pointer-events: none;
			justify-self: left;
			padding-left: 10px;
			}
		.fittings {
			justify-self: left;
			padding-left: 10px;
			}
		.recommendedBasins {
			display: inline-block;
			flex-direction: column;
			font-weight: 800;
			font-size: 20px;
			}
		.recommendedBasins > div {
			text-align: center;
			}
		#recommendedBasins {
			text-align: center;
			}
		#graphContainer {
			width: 100%;
			}
			
	
		table {
			margin: 0 auto;
            border-collapse: collapse;
            margin-bottom: 25px;
			margin-top: 100px;
			width: 150px;
			text-align: center;
			font-family: bahnschrift;
			font-size:11px;
			font-weight: 300;			
        }

        td {
			padding: 5px;
			font-size: 14px;
			border: 1px solid #9C9C9C;
			color: #696969;
		}

		th {
			border: 1px solid #9C9C9C;
			padding: 5px;
			font-size: 14px;
			font-weight: 400;
			background-color:#F3F3F3;
			color: #545454;

		}
		
		tbody tr:nth-child(even) {
			background-color: #E6E6E6;
		}
		#gpmOutput {
			display: flex;
			margin-left: auto;
			margin-right: auto;
			margin-bottom: 25px;
			flex: 1;
			justify-self: center;
			}

	
    </style>
</head>

<body>


	
    <div class="header">
      <a href='https://www.sspma.org/'><img src="Images/SSPMA.jpg" alt="Logo" class="logo"></a>
			<div class="headerText">Sump and Sewage Pump Manufacturers Association</div>
    </div>

    <!-- Navigation -->
    <div class="nav-bar">
   
			<div class="navbar-right">
				<a id='printButton' href="#">Print</a>
				<a href="#">Help</a>
			</div>
	</div>

    <!-- Main Content -->

	<div id="progress">
		<div class="button-row">
			<button id='home' class="hidden" onclick="handleClick()"><img src="Images/home.svg" alt="Logo" class="homeimg"></button>
			<button id='fixtureButton' class="hidden">1. Pump Capacity</button>
			<button id='TDHButton' class="hidden">2. TDH</button>
			<button id='basinSizeButton' class="hidden">3. Summary</button>
		</div>
		</div>

	<div id='mainContainer' class='container'>
		<div id='startContainer'>
			<div id="start">Sewage Pump<br>Sizing Calculator</div>
			<button style="width:200px" id='startButton'>Start Sizing</button>
	</div>
		
		<div id='fixtureSelector' class='hidden fixtureUnitSelect'>
		<div class='calculation' id='instructions' style ="font-size:20px"><b><span style="color:red">*</span>Select Number of Fixtures to Determine Pump Capacity GPM</b></div>
			<div id='fixturesToChoose'>
			<div class='flexBoxEl'>
		<label for="bathtub1">Bathtub, 1 1/2" Trap</label>
		<input class='fixture' min='0' type="number" id="bathtub1" name="bathtub1" value='0'>
		</div>
		<div class='flexBoxEl'>		
		<label for="bathtub2">Bathtub, 2" Trap</label>
		<input class='fixture' min='0' type="number" id="bathtub2" name="bathtub2" value='0'>
		</div>
		<div class='flexBoxEl'>		
		<label for="bidet">Bidet, 1 1/2" Trap</label>
		<input class='fixture' min='0' type="number" id="bidet" name="bidet" value='0'>
		</div>
		<div class='flexBoxEl'>		
		<label for="fountain">Drinking Fountain</label>
		<input class='fixture' min='0' type="number" id="fountain" name="fountain" value='0'>
		</div>
		<div class='flexBoxEl'>		
		<label for="dwasher">Dish Washer</label>
		<input class='fixture' min='0' type="number" id="dwasher" name="dwasher" value='0'>
		</div>
		<div class='flexBoxEl'>		
		<label for="ksink">Kitchen Sink</label>
		<input class='fixture' min='0' type="number" id="ksink" name="ksink" value='0'>
		</div>
		<div class='flexBoxEl'>		
		<label for="ksinkdisp">Kitchen Sink w/ Disposal</label>
		<input class='fixture' min='0' type="number" id="ksinkdisp" name="ksinkdisp" value='0'>
		</div>
		<div class='flexBoxEl'>		
		<label for="lav">Lavatory</label>
		<input class='fixture' min='0' type="number" id="lav" name="lav" value='0'>
		</div>
		<div class='flexBoxEl'>		
		<label for="ltray">Laundry Tray</label>
		<input class='fixture' min='0' type="number" id="ltray" name="ltray" value='0'>
		</div>
		<div class='flexBoxEl'>		
		<label for="shower">Shower</label>
		<input class='fixture' min='0' type="number" id="shower" name="shower" value='0'>
		</div>
		<div class='flexBoxEl'>		
		<label for="shGroup">Shower Group</label>
		<input class='fixture' min='0' type="number" id="shGroup" name="shGroup" value='0'>
		</div>
		<div class='flexBoxEl'>		
		<label for="sinkServ">Sink, Service Type</label>
		<input class='fixture' min='0' type="number" id="sinkServ" name="sinkServ" value='0'>
		</div>
		<div class='flexBoxEl'>		
		<label for="sinkScul">Sink, Scullery</label>
		<input class='fixture' min='0' type="number" id="sinkScul" name="sinkScul" value='0'>
		</div>
		<div class='flexBoxEl'>
		<label for="sinkSurg">Sink, Surgeons</label>
		<input class='fixture' min='0' type="number" id="sinkSurg" name="sinkSurg" value='0'>
		</div>
		<div class='flexBoxEl'>
		<label for="swim">Swimming Pool (per 1000 GAL)</label>
		<input class='fixture' min='0' type="number" id="swim" name="swim" value='0'>
		</div>
		<div class='flexBoxEl'>
		<label for="urinal">Urinal</label>
		<input class='fixture' min='0' type="number" id="urinal" name="urinal" value='0'>
		</div>
		<div class='flexBoxEl'>				
		<label for="washing">Washing Machine</label>
		<input class='fixture' min='0' type="number" id="washing" name="washing" value='0'>
		</div>
		<div class='flexBoxEl'>		
		<label for="waterCloset">Water Closet</label>
		<input class='fixture' min='0' type="number" id="waterCloset" name="waterCloset" value='0'>
		</div>
		<div class='flexBoxEl'>		
		<label for="waterSoft">Water Softener</label>
		<input class='fixture' min='0' type="number" id="waterSoft" name="waterSoft" value='0'>
		</div>
		<div class='flexBoxEl'>		
		<label for="brGroup">Bathroom Group</label>
		<input class='fixture' min='0' type="number" id="brGroup" name="brGroup" value='0'>
		</div>
		<div class='flexBoxEl'>
		<label for="unlisted1">Unlisted Fixture, 1-1/4" Trap</label>
		<input class='fixture' min='0' type="number" id="unlisted1" name="unlisted1" value='0'>
		</div>
		<div class='flexBoxEl'>
		<label for="unlisted2">Unlisted Fixture, 1-1/2" Trap</label>
		<input class='fixture' min='0' type="number" id="unlisted2" name="unlisted2" value='0'>
		</div>
		<div class='flexBoxEl'>
		<label for="unlisted3">Unlisted Fixture, 2" Trap</label>
		<input class='fixture' min='0' type="number" id="unlisted3" name="unlisted3" value='0'>
		</div>
		<div class='flexBoxEl'>
		<label for="unlisted4">Unlisted Fixture, 2-1/2" Trap</label>
		<input class='fixture' min='0' type="number" id="unlisted4" name="unlisted4" value='0'>
		</div>
		<div class='flexBoxEl'>
		<label for="unlisted5">Unlisted Fixture, 3" Trap</label>
		<input class='fixture' min='0' type="number" id="unlisted5" name="unlisted5" value='0'>
		</div>
		</div>
		<br>
		
		<div id='fixtureOutputs'>
		<div class="calculation"><div><span  id='fixtureValue2'></span><span> Fixture Units</span></div>
		<div><span id='gpmValue2'></span> <span> GPM</span></div></div>
  
	<div class="continue"><button class='continueButton' id='toGPM'>Continue</button></div></div>
		</div>
		
		<div id='gpmStuff' class='gpmStuff hidden'>
				<div id='scouringNote' class='hidden'>*NOTE: SCOURING VELOCITY REQUIRES <span id='scouring'>21</span> GPM</div>
				<br>
				<div id='gpmOutput'>	<label for='gpmValue'>Required Capacity (GPM)</label><input id='gpmValue' name='gpmValue'></input></div>
		<div id='fittingsOutPuts'>

		
			<label for='nomPipe'>Nominal Pipe Size</label>
				<select class='fittings' id="nomPipe" name="nomPipe">
					<option id='2inch' selected value="2">2"</option>
					<option id='2.5inch' value="2.5">2-1/2"</option>
					<option id='3inch' value="3">3"</option>
				</select>
				

			
			<label for="StraightPipe"><span style="color:red">*</span>Straight Pipe (ft):</label>
				<input class='fittings' min='0' type="number" id="StraightPipe" name="StraightPipe" value='0'>
						<label for='matPipe'>Pipe Material</label>
				<select class='fittings'  id="matPipe" name="matPipe">
					<option selected value="PVC">PVC</option>
					<option value="Steel">Steel</option>
				</select>
			<label for="StaticHead">Static Head (ft):</label>
				<input class='fittings' min='0'  type="number" id="StaticHead" name="StaticHead" value='0'>
    	</div>
		
		
		<div id='fittingsDiv'>Fittings from pump to Discharge in Selected size</div>
			<div id='fittingsOutPuts2'>
			
				<label for='90Elbow'>Number of 90 deg Elbows: </label>
					<input  class='fittings' min='0' type='number' id='90Elbow' name='90Elbow' value=0>

				<label for='45Elbow'>Number of 45 deg Elbows: </label>
					<input  class='fittings'min='0'  type='number' id='45Elbow' name='45Elbow' value=0>

  	
				<label for='teeThru'>Number of Tees (through flow): </label>
					<input  class='fittings'min='0'  type='number' id='teeThru' name='teeThru' value=0>

  	  
				<label for='teeBranch'>Number of Tees (branch flow): </label>
					<input  class='fittings' min='0' type='number' id='teeBranch' name='teeBranch' value=0> 
  	  
				<label for='swingCheck'>Number of swing check valves: </label>
					<input class='fittings' min='0'  type='number' id='swingCheck' name='swingCheck' value=0>

				<label for='gateValve'>Number of Gate Valves: </label>
					<input class='fittings'  min='0' type='number' id='gateValve' name='gateValve' value=0>
			</div>
		<br>
			<div id='lengthsOutputs'>
				<div class='calculation'><div id='tdhoutput'><span>TDH: </span><span id='tdhResult'></span></div>
			</div>
				<div class="continue"><button class='continueButton' id='toBasin'>Continue</button></div>
			</div>
		</div>
			
			
<div id='graphContainer' class='hidden'><div id='myPlot'style="" ></div><div class='continue'><button class='continueButton' onclick='location.reload()'>Start Over</button></div></div>
<div id='basinStuff' class='hidden'>
		<div class = 'recommendedBasins'>
			<div id='textOutputs'>
			<table>
					<tr>
						<th>GPM</th>
						<th>TDH</th>
					</tr>
					<tr>
						<td id='gpm/3'></td>
						<td id='gpm/3TDH'></td>
					</tr>
					<tr>
						<td id='gpm/2'></td>
						<td id='gpm/2TDH'></td>
					</tr>
					<tr>
						<td id='gpmTable'></td>
						<td id='gpmTableTDH'></td>
					</tr>
					<tr>
						<td id='gpm1.5'></td>
						<td id='gpm1.5TDH'></td>
					</tr>
					<tr>
						<td id='gpm2'></td>
						<td id='gpm2TDH'></td>
					</tr>
				</table>
				
				<div id='resultsDiv'>
					<div><span style="color:red">*</span><span>Flow (GPM): </span><span  id='gpmValue3'></span></div>
					<div><span style="color:red">*</span><span>TDH (ft): </span><span id='TDHOutput3'></span></div><br><div class='hidden' id='recommendedBasins'></div></div></div></div><br>
<br>			</div>
		</div>

</div>



</div>
  

	
	<div id="footer2">
		<a href='#'><img src="Images/in.svg" style="width: 33px;" alt="in.svg" class="footerPics"></a>
		<a href='#'><img src="Images/fb.svg" style="width: 33px;" alt="fb.svg" class="footerPics"></a>
		<a href='#'><img src="Images/mail.svg" style="width: 33px;" alt="mail.svg" class="footerPics"></a>
	</div>

	
    <div id="footer">
		<div class="footer-left">&copy; 2024 SSPMA. All Rights Reserved.</div>
		<div class="footer-right">Terms of Service</div>
    </div>
<script src="plotly.js"></script>
<script>
document.getElementById('fixtureButton').addEventListener('click', function() {
	document.getElementById('fixtureSelector').classList.remove('hidden');
	document.getElementById('gpmStuff').classList.add('hidden');
	document.getElementById('TDHButton').classList.add('hidden');
	document.getElementById('TDHButton').classList.remove('status-button');
	document.getElementById('basinSizeButton').classList.add('hidden');
	document.getElementById('basinSizeButton').classList.remove('status-button');
	document.getElementById('basinStuff').classList.add('hidden');
	document.getElementById('graphContainer').classList.add('hidden');
	});
document.getElementById('TDHButton').addEventListener('click', function() {
	document.getElementById('gpmStuff').classList.remove('hidden');
	document.getElementById('graphContainer').classList.add('hidden');
	document.getElementById('basinStuff').classList.add('hidden');
	document.getElementById('basinSizeButton').classList.add('hidden');
	document.getElementById('basinSizeButton').classList.remove('status-button');
	});

	document.getElementById('startButton').addEventListener('click', function()  {
	//document.getElementById('continue').style.display = 'block';
	document.getElementById('home').classList.add('active-button');
	document.getElementById('fixtureButton').classList.add('status-button');
	document.getElementById('fixtureButton').classList.remove('inactive-button');
	document.getElementById('fixtureSelector').classList.remove('hidden');
	document.getElementById('startContainer').style.display = 'none';
	});
	document.getElementById('home').addEventListener('click', function() {
	location.reload()
	});

	
document.getElementById('toGPM').addEventListener('click', function() {
fixtureUnits();
nompipe = document.getElementById('nomPipe').value;
	switch (nompipe) {
		case '2':

		scouringVel = 21;
		break;
		case '2.5':

		scouringVel = 30
		break;
		case '3':

		scouringVel = 46
		}
		if (recommendedGPM < scouringVel) {
		document.getElementById('scouringNote').classList.remove('hidden');
		document.getElementById('scouring').textContent = ' ' + scouringVel + ' ';
		document.getElementById('gpmValue').style.border = '3px solid red';
		} else {
		document.getElementById('scouringNote').classList.add('hidden');
		document.getElementById('gpmValue').style.border = '0px solid red';
		}

	//document.getElementById('GPM').classList.remove('hidden');
	recommendedGPM = (1.851732392 * Math.pow(totalUnits, .6884906927))
	recommendedGPM10 = Math.round((1.851732392 * Math.pow(totalUnits, .6884906927))/10)*10;
	recommendedGPM25 = Math.round((1.851732392 * Math.pow(totalUnits, .6884906927))/25)*25;
	recommendedGPM5 = Math.round((1.851732392 * Math.pow(totalUnits, .6884906927))*2)/2;
	document.getElementById('gpmValue').value = recommendedGPM5;
	if (totalUnits === 0 && recommendedGPM === 0) {
		alert('Please enter fixture units');
		}else {
			document.getElementById('TDHButton').classList.add('status-button');
	document.getElementById('TDHButton').classList.remove('inactive-button');
fixtureUnits();
	document.getElementById('fixtureSelector').classList.add('hidden');
	document.getElementById('gpmStuff').classList.remove('hidden');
	}
	//document.getElementById('fixtureValue').innerHTML = totalUnits;
	
/*	if (recommendedGPM > 100) {
		document.getElementById('2inch').classList.add('hidden');
		document.getElementById('2.5inch').setAttribute('selected', true);
	}
	if (recommendedGPM < 29 || recommendedGPM > 200) {
		document.getElementById('2.5inch').classList.add('hidden');
		if (recommendedGPM < 29) {
	document.getElementById('2inch').setAttribute('selected', true);
		} else {
	document.getElementById('3inch').setAttribute('selected', true);
					}
	}
	if (recommendedGPM < 45) {
		document.getElementById('3inch').classList.add('hidden');
	}
	if (recommendedGPM > 250) {
		alert('This calculator only supports up to 250GPM');
	document.getElementById('TDHButton').classList.remove('status-button');
	document.getElementById('TDHButton').classList.add('inactive-button');
	
	document.getElementById('fixtureSelector').classList.remove('hidden');
	document.getElementById('gpmStuff').classList.add('hidden');
	}*/
	});
	
/*document.getElementById('calcStuff').addEventListener('click', function() {
	//document.getElementById('gpmStuff').classList.add('hidden');
	document.getElementById('pipeLength').classList.remove('hidden');

	console.log(recommendedGPM < 35);
	if (recommendedGPM <= 35) {
		document.getElementById('recommendedBasins').innerHTML = '18" - 48" Basin Recommended'
	}
	if (recommendedGPM > 35 && recommendedGPM <= 60) {
		document.getElementById('recommendedBasins').innerHTML = '24" - 48" Basin Recommended'
	}
	if (recommendedGPM > 60 && recommendedGPM <= 100) {
		document.getElementById('recommendedBasins').innerHTML = '30" - 48" Basin Recommended'
	}
	if (recommendedGPM > 100 && recommendedGPM <= 175) {
		document.getElementById('recommendedBasins').innerHTML = '36" - 48" Basin Recommended'
	}
	if (recommendedGPM > 175 && recommendedGPM <= 250) {
		document.getElementById('recommendedBasins').innerHTML = '48" Basin Recommended'
	}
	if (recommendedGPM > 250) {
		document.getElementById('recommendedBasins').innerHTML = 'Too many fixture units/GPM'
	}
nompipe = document.getElementById('nomPipe').value;
if (nompipe === '2') {
	pipeID = 1.939;
	}
if (nompipe === '2.5') {
	pipeID = 2.469;
	}
if (nompipe === '3') {
	pipeID = 3.068;
	}
matpipe = document.getElementById('matPipe').value;
if (matpipe === 'PVC') {
		absRoughness = .00006;
		cFactor = 150
		}
if (matpipe === 'Steel') {
	absRoughness = .0018;
	cFactor = 100;
	}
console.log(matpipe);
	});*/


//document.getElementById('toPipeLengths').addEventListener('click', function() {

//	document.getElementById('basinStuff').classList.add('hidden');
//	document.getElementById('pipeLength').classList.remove('hidden');
	//reynoldsNumber = (50.66*recommendedGPM * 62.4)/(pipeID * 1);
	
	//document.getElementById('reynoldsResults').innerHTML = reynoldsNumber;
	//	darcyFactor = 0.25/(Math.pow(Math.log10((absRoughness/(3.7 * pipeID)) + (5.74/(Math.pow(reynoldsNumber, .9)))),2))
	//document.getElementById('darcyFactor').innerHTML = darcyFactor;

/*document.getElementById('headLoss').addEventListener('click', function() {
	StraightPipe = document.getElementById('StraightPipe').value;
	console.log(recommendedGPM);

	
el90 = document.getElementById('90Elbow').value;
el45 = document.getElementById('45Elbow').value;
teeThru = document.getElementById('teeThru').value;
teeBranch = document.getElementById('teeBranch').value;
swingCheck = document.getElementById('swingCheck').value;
gateValve = document.getElementById('gateValve').value;
totalPipe = document.getElementById('totalStraightPipe')
nompipe = document.getElementById('nomPipe').value;
	switch (nompipe) {
		case '2':
		el90Pipe = el90 * 5.2;
		el45Pipe = 2.8 * el45;
		teeThruPipe = 3.5 * teeThru;
		teeBranchPipe = 10.3 * teeBranch;
		swingCheck = 17.2 * swingCheck;
		gateValvePipe = 1.4 * gateValve;
		break;
		case '2.5':
		el90Pipe = el90 * 6.2;
		el45Pipe = 3.3 * el45;
		teeThruPipe = 4.1 * teeThru;
		teeBranchPipe = 12.3 * teeBranch;
		swingCheck = 20.6 * swingCheck;
		gateValvePipe = 1.7 * gateValve;
		break;
		case '3':
		el90Pipe = el90 * 7.7;
		el45Pipe = 4.1 * el45;
		teeThruPipe = 5.1 * teeThru;
		teeBranchPipe = 15.3 * teeBranch;
		swingCheck = 25.5 * swingCheck;
		gateValvePipe = 2.0 * gateValve;
		}
		
	totalStraightPipe = +StraightPipe + +el90Pipe + + el45Pipe + +teeThruPipe + +teeBranchPipe + +swingCheck + +gateValvePipe
	totalPipe.innerHTML = totalStraightPipe;
	headLoss = 2.31 * ((4.52 *totalStraightPipe * Math.pow(recommendedGPM, 1.852))/(Math.pow(cFactor, 1.852) * Math.pow(pipeID, 4.87)));
	console.log(Math.pow(cFactor, 1.852) * Math.pow(pipeID, 4.87));
	console.log(Math.pow(cFactor, 1.852));
	console.log(Math.pow(pipeID, 4.87));
	console.log(cFactor);
	staticHead = document.getElementById('StaticHead').value
	tdhResult = +staticHead + +headLoss;
	document.getElementById('headLossResult').innerHTML = Math.round(headLoss);
	document.getElementById('tdhResult').innerHTML = Math.round(tdhResult);
	});*/
const fixtures = document.querySelectorAll(".fixture");
function fixtureUnits() {
		unlisted1 = document.getElementById('unlisted1').value;
	unlisted2 = document.getElementById('unlisted2').value;
	unlisted3 = document.getElementById('unlisted3').value;
	unlisted4 = document.getElementById('unlisted4').value;
	unlisted5 = document.getElementById('unlisted5').value;
	brGroup = document.getElementById('brGroup').value;
	shGroup = document.getElementById('shGroup').value;
	shower = document.getElementById('shower').value;
	ltray = document.getElementById('ltray').value;
	lav = document.getElementById('lav').value;
	ksinkdisp = document.getElementById('ksinkdisp').value;
	ksink = document.getElementById('ksink').value;
	dwasher = document.getElementById('dwasher').value;
	fountain = document.getElementById('fountain').value;
	bidet = document.getElementById('bidet').value;
	bathtub1 = document.getElementById('bathtub1').value;
	bathtub2 = document.getElementById('bathtub2').value;
	sinkServ = document.getElementById('sinkServ').value;
	sinkScul = document.getElementById('sinkScul').value;
	sinkSurg = document.getElementById('sinkSurg').value;
	swim = document.getElementById('swim').value;
	urinal = document.getElementById('urinal').value;
	washing = document.getElementById('washing').value;
	waterCloset = document.getElementById('waterCloset').value;
	waterSoft = document.getElementById('waterSoft').value;
	
console.log(unlisted5);
	unlisted1Units = unlisted1 * 2;
	unlisted2Units = unlisted2 * 3;
	unlisted3Units = unlisted3 * 4;
	unlisted4Units = unlisted4 * 5;
	unlisted5Units = unlisted5 * 6;
	brGroupUnits = brGroup * 6;
	shGroupUnits = shGroup * 3;
	showerUnits = shower * 2;
	ltrayUnits = ltray * 2;
	dispUnits = ksinkdisp * 3;
	ksinkUnits = ksink * 2;
	dwasherUnits = dwasher * 2;
	bidetUnits = bidet * 3;
	bathtub1Units = bathtub1 * 2;
	bathtub2Units = bathtub2 * 3;
	sinkServUnits = sinkServ * 3;
	sinkSculUnits = sinkScul * 4;
	sinkSurgUnits = sinkSurg * 3;
	swimUnits = swim;
	urinalUnits = urinal * 4;
	washingUnits = washing * 2;
	waterClosetUnits = waterCloset * 3
	waterSoftUnits = waterSoft * 4
console.log(unlisted5Units);
	totalUnits = +unlisted1Units + +unlisted2Units + +unlisted3Units + +unlisted4Units + +unlisted5Units + +brGroupUnits + +shGroup + +showerUnits +
	+ltray + +lav + +dispUnits + +ksinkUnits + +dwasherUnits + +fountain + +bidetUnits + +bathtub1Units + +bathtub2Units + +sinkServUnits + +sinkSculUnits +
	+sinkSurgUnits + +swim + +urinalUnits + +washingUnits + +waterClosetUnits + +waterSoftUnits;
console.log(totalUnits);
	recommendedGPM = (1.851732392 * Math.pow(totalUnits, .6884906927))
	recommendedGPM10 = Math.round((1.851732392 * Math.pow(totalUnits, .6884906927))/10)*10;
	recommendedGPM25 = Math.round((1.851732392 * Math.pow(totalUnits, .6884906927))/25)*25;
	recommendedGPM5 = Math.round((1.851732392 * Math.pow(totalUnits, .6884906927))*2)/2;
	}
fixtures.forEach(function(fixture) {
	fixture.addEventListener("change", function() {
	fixtureUnits();
	document.getElementById('gpmValue2').innerHTML = recommendedGPM5;
	document.getElementById('fixtureValue2').innerHTML = totalUnits;
	});
	});
const fittings = document.querySelectorAll('.fittings');

fittings.forEach(function(fitting) {
	fitting.addEventListener('change', function() {
		StraightPipe = document.getElementById('StraightPipe').value;
matpipe = document.getElementById('matPipe').value;
if (matpipe === 'PVC') {
		absRoughness = .00006;
		cFactor = 150
		}
if (matpipe === 'Steel') {
	absRoughness = .0018;
	cFactor = 100;
	}
	
el90 = document.getElementById('90Elbow').value;
el45 = document.getElementById('45Elbow').value;
teeThru = document.getElementById('teeThru').value;
teeBranch = document.getElementById('teeBranch').value;
swingCheck = document.getElementById('swingCheck').value;
gateValve = document.getElementById('gateValve').value;
totalPipe = document.getElementById('totalStraightPipe')
nompipe = document.getElementById('nomPipe').value;
	switch (nompipe) {
		case '2':
		el90Pipe = el90 * 5.2;
		el45Pipe = 2.8 * el45;
		teeThruPipe = 3.5 * teeThru;
		teeBranchPipe = 10.3 * teeBranch;
		swingCheck = 17.2 * swingCheck;
		gateValvePipe = 1.4 * gateValve;
		scouringVel = 21;
		break;
		case '2.5':
		el90Pipe = el90 * 6.2;
		el45Pipe = 3.3 * el45;
		teeThruPipe = 4.1 * teeThru;
		teeBranchPipe = 12.3 * teeBranch;
		swingCheck = 20.6 * swingCheck;
		gateValvePipe = 1.7 * gateValve;
		scouringVel = 30
		break;
		case '3':
		el90Pipe = el90 * 7.7;
		el45Pipe = 4.1 * el45;
		teeThruPipe = 5.1 * teeThru;
		teeBranchPipe = 15.3 * teeBranch;
		swingCheck = 25.5 * swingCheck;
		gateValvePipe = 2.0 * gateValve;
		scouringVel = 46
		}
if (nompipe === '2') {
	pipeID = 1.939;
	}
if (nompipe === '2.5') {
	pipeID = 2.469;
	}
if (nompipe === '3') {
	pipeID = 3.068;
	}	
	totalStraightPipe = +StraightPipe + +el90Pipe + + el45Pipe + +teeThruPipe + +teeBranchPipe + +swingCheck + +gateValvePipe
	//totalPipe.innerHTML = Math.round(totalStraightPipe);
	headLoss = 2.31 * ((4.52 * totalStraightPipe * Math.pow(recommendedGPM, 1.852))/(Math.pow(cFactor, 1.852) * Math.pow(pipeID, 4.87)));

	staticHead = document.getElementById('StaticHead').value
	tdhResult = +staticHead + +headLoss;
	//document.getElementById('headLossResult').innerHTML = Math.round(headLoss);
	document.getElementById('tdhResult').innerHTML = Math.round(tdhResult);
	
	if (recommendedGPM < scouringVel) {
		document.getElementById('scouringNote').classList.remove('hidden');
		document.getElementById('scouring').textContent = ' ' + scouringVel + ' ';
		document.getElementById('gpmValue').style.border = '3px solid red';
		} else {
		document.getElementById('scouringNote').classList.add('hidden');
		document.getElementById('gpmValue').style.border = '0px solid red';
		}
	});
	});
/*document.getElementById('fixture').addEventListener('click', function() {
	document.getElementById('gpmStuff').classList.add('hidden');
	document.getElementById('fixtureSelector').classList.remove('hidden');
	document.getElementById('GPM').classList.add('hidden');
	});*/
	

	
	
document.getElementById('toBasin').addEventListener('click', function() {
straightpipeCheck = document.getElementById('StraightPipe').value
console.log(straightpipeCheck);
if (straightpipeCheck == 0) {
	alert('Please enter a value for straight pipe')
	}else if (straightpipeCheck > 0){
		document.getElementById('gpmStuff').classList.add('hidden');
	document.getElementById('basinStuff').classList.remove('hidden');
	document.getElementById('basinSizeButton').classList.remove('hidden');
	document.getElementById('basinSizeButton').classList.add('status-button');
	document.getElementById('mainContainer').style.flexDirection = 'row';
	document.getElementById('gpmValue3').innerHTML = Math.round(recommendedGPM*10)/10;
	document.getElementById('TDHOutput3').innerHTML = Math.round(tdhResult*10)/10;
	document.getElementById('graphContainer').classList.remove('hidden');
	if (recommendedGPM <= 35) {
		document.getElementById('recommendedBasins').innerHTML = '18" - 48" Basin Recommended'
	}
	if (recommendedGPM > 35 && recommendedGPM <= 60) {
		document.getElementById('recommendedBasins').innerHTML = '24" - 48" Basin Recommended'
	}
	if (recommendedGPM > 60 && recommendedGPM <= 100) {
		document.getElementById('recommendedBasins').innerHTML = '30" - 48" Basin Recommended'
	}
	if (recommendedGPM > 100 && recommendedGPM <= 175) {
		document.getElementById('recommendedBasins').innerHTML = '36" - 48" Basin Recommended'
	}
	if (recommendedGPM > 175 && recommendedGPM <= 250) {
		document.getElementById('recommendedBasins').innerHTML = '48" Basin Recommended'
	}
	if (recommendedGPM > 250) {
		document.getElementById('recommendedBasins').innerHTML = '48" Basin Recommended'
	}
let exp = "(2.31 * ((4.52 * totalStraightPipe * Math.pow(x, 1.852))/(Math.pow(cFactor, 1.852) * Math.pow(pipeID, 4.87)))) + +staticHead";
thirdGpm = document.getElementById('gpm/3');
halfGpm = document.getElementById('gpm/2');
gpmTable = document.getElementById('gpmTable');
gpmTimeandhalf = document.getElementById('gpm1.5');
gpmdouble = document.getElementById('gpm2');

thirdTDH = document.getElementById('gpm/3TDH');
halfTDH = document.getElementById('gpm/2TDH');
gpmTableTDH = document.getElementById('gpmTableTDH');
timeAndhalfTDH = document.getElementById('gpm1.5TDH');
doubleTDH = document.getElementById('gpm2TDH');

thirdGpm.innerHTML = `${Math.round((recommendedGPM/3)*10)/10}`;
halfGpm.innerHTML = `${Math.round((recommendedGPM/2)*10)/10}`;
gpmTable.innerHTML = `${Math.round((recommendedGPM)*10)/10}`;
gpmTimeandhalf.innerHTML = `${Math.round(((recommendedGPM*3)/2)*10)/10}`;
gpmdouble.innerHTML = `${Math.round((recommendedGPM*2)*10)/10}`;

thirdTDH.innerHTML = `${Math.round(((2.31 * ((4.52 * totalStraightPipe * Math.pow((recommendedGPM/3), 1.852))/(Math.pow(cFactor, 1.852) * Math.pow(pipeID, 4.87)))) + +staticHead)*10)/10}`
halfTDH.innerHTML = `${Math.round(((2.31 * ((4.52 * totalStraightPipe * Math.pow((recommendedGPM/2), 1.852))/(Math.pow(cFactor, 1.852) * Math.pow(pipeID, 4.87)))) + +staticHead)*10)/10}`
gpmTableTDH.innerHTML = `${Math.round(((2.31 * ((4.52 * totalStraightPipe * Math.pow((recommendedGPM), 1.852))/(Math.pow(cFactor, 1.852) * Math.pow(pipeID, 4.87)))) + +staticHead)*10)/10}`
timeAndhalfTDH.innerHTML = `${Math.round(((2.31 * ((4.52 * totalStraightPipe * Math.pow((recommendedGPM*3/2), 1.852))/(Math.pow(cFactor, 1.852) * Math.pow(pipeID, 4.87)))) + +staticHead)*10)/10}`
doubleTDH.innerHTML = `${Math.round(((2.31 * ((4.52 * totalStraightPipe * Math.pow((recommendedGPM*2), 1.852))/(Math.pow(cFactor, 1.852) * Math.pow(pipeID, 4.87)))) + +staticHead)*10)/10}`

const xValues = [];
const yValues = [];
for (let x = 0; x <= recommendedGPM5*2; x += 1) {
  xValues.push(x);
  yValues.push(eval(exp));
}
const data = [{x:xValues, y:yValues, mode:'lines'}];
var layout = {
  autosize: false,
  width: 700,
  height: 500,
    paper_bgcolor: 'rgba(245, 245, 245, 1)',
    plot_bgcolor: 'rgba(245, 245, 245, 1)',
  margin: {
    l: 100,
    r: 50,
    b: 100,
    t: 100,
    pad: 4,

  },
  title: {
    text:`<b>System Curve <br><sup>(${document.getElementById('recommendedBasins').innerHTML})</sup></b>`,
    font: {
      family: 'bahnschrift, monospace',
      size: 24
    },
    xref: 'paper',
    x: 0.5,
	xanchor: 'center'
  },
  xaxis: {
    title: {
      text: 'Flow (GPM)',
      font: {
        family: 'bahnschrift, monospace',
        size: 18,
        color: '#7f7f7f'
		
      }
    },
	gridcolor: "rgba(0,0,0,.65)",
  },
  yaxis: {
    title: {
      text: "Total Dynamic Head (ft)",
      font: {
        family: 'bahnschrift, monospace',
        size: 18,
        color: '#7f7f7f'
      }
    },
	gridcolor: "rgba(0,0,0,.65)",
	rangemode: 'normal',
  },

	shapes: [
	{
        type: 'line',
        x0: recommendedGPM,
        y0: 0,
        x1: recommendedGPM,
        y1: 2.31 * ((4.52 * totalStraightPipe * Math.pow(recommendedGPM, 1.852))/(Math.pow(cFactor, 1.852) * Math.pow(pipeID, 4.87))) + +staticHead,
        line:{
            color: 'rgba(200, 0, 0, 100)',
            width: 4,
            dash:'dot'
        
	}
	},
	{	
        type: 'line',
        x0: 0,
        y0: 2.31 * ((4.52 * totalStraightPipe * Math.pow(recommendedGPM, 1.852))/(Math.pow(cFactor, 1.852) * Math.pow(pipeID, 4.87))) + +staticHead,
        x1: recommendedGPM,
        y1: 2.31 * ((4.52 * totalStraightPipe * Math.pow(recommendedGPM, 1.852))/(Math.pow(cFactor, 1.852) * Math.pow(pipeID, 4.87))) + +staticHead,
        line:{
            color: 'rgba(200, 0, 0, 100)',
            width: 4,
            dash:'dot'
        }
    }
	]
	}

document.getElementById('printButton').addEventListener('click', () => {

Plotly.downloadImage('myPlot', {format: 'png', width: 800, height: 600, filename: 'SystemCurve'});
});		
	Plotly.newPlot('myPlot',data,layout)
	
	}});
	



	


	
</script>
	
	
	
</body>

</html>
